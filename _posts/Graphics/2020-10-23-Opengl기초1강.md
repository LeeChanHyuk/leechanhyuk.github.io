---
title: "OpenGL_Triangle_rendering"
date: 2020-11-14 15:10:00
author: Leechanhyuk
categories: Graphics
tags:	Start Graphics OpenGL
cover: "/assets/instacode.png"
toc: true
---

그래픽스 기초
==========

## 0. 시작하기전에

> 해당 포스팅은 출처에 기재되어 있는 링크에서 대부분의 내용을 참조하여 번역 및 추가 설명을 한 것임을 먼저 말씀드립니다.


OpenGL은 원하는 3D 화면을 띄워주는 **랜더링 라이브러리**입니다.

일반적으로는 원하는 3D 모델에서 어떠한 방법으로 정보를 얻어오면(파싱) 그 정보를 가지고 OpenGL에서 3D로 랜더링하는 형식을 취하고

파싱하는 대표적인 라이브러리로는 Assimp, FBX SDK 등이 있고

랜더링하는 라이브러리로는 OpenGL, DirectX 등이 있습니다.

즉 3D 모델 -> 정보 파싱 -> 랜더링의 과정을 따릅니다.

처음부터 3D 모델을 바로 랜더링 해볼 수도 있겠지만, 그에 앞서서 간단한 예제로 시작을 해볼까 합니다.

간단한 예제로써 이번 포스팅에서 해볼 건 Triangle rendering이고, 개인적으로는 이걸 토대로 OpenGL을 처음 배웠었기에 시작으로 

삼아보고자 합니다.

시작해보겠습니다.
***
## 1. 프로젝트 목표

삼각형 띄워보기 (2D)


***
## 2. 개념 설명

앞서 설명한 것 처럼 랜더링을 하기에 앞서, 랜더링을 할 정보를 받아야합니다.

받아야 할 정보중 가장 중요한 것은 바로 **점**입니다.

이 **점**(Vertex)들이 모여서 하나의 **면**(Polygon)을 이루고 그 **면**들이 모여서 하나의 **3D ObJect**가 완성됩니다.

이 점이 가지는 정보는 점의 좌표, 그리고 색깔으로 구성됩니다. 그렇기에 저희는 OpenGL쪽에 이러한 정보들을 넘겨줘야합니다.

우선 색깔은 제쳐두고, 점의 좌표만으로 색 없이 삼각형을 랜더링해보겠습니다.

우리가 랜더링하고자 하는 것은 3D Object이기 때문에, 점의 좌표 역시 x, y, z. 총 3축으로 구성되어 있습니다.

바로 실제 코드에서 점의 정보를 나타내는 방법을 보겠습니다.

'''
float vertices[] = {
    -0.5f, -0.5f, 0.0f,
     0.5f, -0.5f, 0.0f,
     0.0f,  0.5f, 0.0f
};'''

한 행이 x y z를 이루고 있습니다.(첫번째 줄을 예시로 들자면 x=-0.5f, y=-0.5f, z=0.0f).

3D 랜더링 라이브러리이기 때문에 3축의 정보를 받아왔지만, 이번 포스팅에서는 2D 삼각형의 랜더링이 목적이므로, Z는 모두 0입니다.

해당 Vertex들을 2D 평면에 나타내면, 아래와 같은 삼각형이 됩니다.

![Alt text](/asset/image/opengl1/opengl1.jpg)

그냥 저렇게 다차원배열을 만드는 것 만으로도 바로 삼각형이 랜더링 되면 좋겠지만, 그럴 수 없기에 우리는 받아온 정보를 OpenGL이 알아볼 수 있게 어떠한 특정한 공간에 저장해야 될 필요성이 있습니다.

그 공간을 Buffer라고 하고 특히 이와 같은 Vertex를 저장하는 버퍼를 VBO(Vertex Buffer Objects)라고 합니다.

VBO는 저희가 버퍼에 저장한 Vertex들을 GPU상에 올려주는 역할을 하고, 많은 점들을 한번에 보낼 수 있기 때문에 매우 효율적입니다.

이렇게 GPU에 올려둔 Vertex들은 랜더링할 때마다 다시 전송해야 할 필요없이, 한번 올려두는 것만으로도 계속해서 꺼내서 다시 쓸수있어서 속도 측면으로 매우 이점이 많습니다.

이제 실제로 VBO를 만들어보겠습니다.

![Alt text]](/asset/image/opengl1/VBO1.png)

위와 같이 int형 변수를 하나 선언하고(변수명은 뭐가 됐든 상관없습니다. 혼란을 피하기 위해서 여기서는 VBO로 사용하겠습니다.)

glGenBuffer 함수를 통해서 이 변수를 VBO 버퍼로 만들어줍니다.

VBO 버퍼를 만들었으면, 이 버퍼에 데이터를 전송해주기 위해 바인딩이라는 과정을 해야합니다.

바인딩이란 특정 버퍼를 활성화 시켜주는 과정이라고 생각하시면 됩니다.

즉, 버퍼가 여러 개 있을 때 특정 버퍼를 사용하거나, 정보를 넣고 싶을 때 바인딩을 항상 하고 진행한다고 생각하시면 편하실 듯 합니다.

![Alt text]](/asset/image/opengl1/VBO2.png)

위와 같이 glBindBuffer 함수로 우리가 만든 VBO를 GL_ARRAY_BUFFER에 관해서 바인딩해주면, 그 이후로 GL_ARRAY_BUFFER에 정보를 넣을 때 우리가 만든 VBO에 정보를 저장하게 됩니다.

바인딩이 끝났으면, Vertex 정보를 VBO 내에 넣습니다.

![Alt text]](/asset/image/opengl1/VB03.png)

glBufferData 함수는 사용자가 넣고 싶은 데이터를 지정된 버퍼에 복사해주는 역할을 합니다.

**glBufferData(선택 버퍼, 넣을 데이터의 사이즈, 실제 넣을 데이터 배열, 데이터 종류)**

나머지는 보시면 아실듯하고, 마지막 데이터 종류의 경우에는 총 3가지로 나뉩니다.

- GL_STATIC_DRAW : 거의 변하지 않는 데이터
- GL_DYNAMIC_DRAW : 자주 변하는 데이터
- GL_STREAM_DRAW : 그려질 때마다 변하는 데이터

이렇게 데이터의 종류를 나눠두는 이유는, 데이터를 저장할 공간을 구분하기 위해서입니다.

거의 변하지 않는 데이터의 경우에는 데이터를 쓰는 속도가 느린 메모리에, 자주 변하는 데이터일수록 쓰는 속도가 빠른 메모리에 저장하게 됩니다.

물론 이렇게 하는 것은, 쓰는 속도가 빠른 메모리의 경우에는 전체 용량이 한정적이고, 느릴 수록 많은 용량이 확보되어 있기 때문에 효율적인 동작을 위해 이렇게 구성합니다.

아무튼, 길었지만 이렇게 우리는 성공적으로 VBO의 우리의 삼각형 데이터를 저장했습니다.







***
## 전체 소스 코드

Link : [Source_code][link]

[link] : https://learnopengl.com/code_viewer_gh.php?code=src/1.getting_started/2.1.hello_triangle/hello_triangle.cpp


***
## 출처
https://learnopengl.com







